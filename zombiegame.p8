pico-8 cartridge // http://www.pico-8.com
version 43
__lua__
--game--

function _init()
 ibullets()
 ienemies()
end

function _update()
 move_player()
 
 if btnp(❎) then
  shoot()
 end
 ubullets()
end

function _draw()
 cls()
 if btnp(❎) then
  spr(0,player.x,player.y)
  sp=17
 end
 if player.flipped then
  spr(player.sprite,player.x,player.y,1,1,true)
 else
  spr(player.sprite,player.x,player.y) 
 end
 for e in all(enemies) do
 	spr(e.sprite,e.x,e.y)
 end
 dbullets()
end
-->8
--bullets--

function ibullets()
 buls={}
end

function ubullets()
 for bul in all(buls) do
  --what does each bullet do
  bul.x+=bul.spd
  if bul.x > 128 then
   del(buls,bul)
  end
 end
end

function dbullets()
 for bul in all(buls) do
  --how to draw each bullet
  spr(0,bul.x,bul.y)
 end
end

function shoot()
 --what happens when we fire
 newbul = {
  x=player.x,
  y=player.y,
  spd=5,
  dmg=100
 }
 add(buls,newbul)
end
-->8
--player--

player={
 x=8,
 y=8,
 sprite=1,
 hp=100
 flipped=false,
 moving=false,
 animation={
  timer=0
 }
}

function move_player()
 player.moving=false

 if btn(⬅️) then
  player.x-=1
  player.flipped=true
  player.moving=true
  player.sprite=8
 end
 if btn(➡️) then
  player.x+=1
  player.flipped=false
  player.moving=true
  player.sprite=8
 end
 if btn(⬆️) then
  player.y-=1
  player.moving=true
  player.sprite=9
 end
 if btn(⬇️) then
  player.y+=1
  player.moving=true
  player.sprite=1
 end
end

function animate_player()
 if player.moving then
  player.anim.timer+=1
   if player.anim.timer>5 then  -- this value determines animation speed
    player.anim.timer=0
    player.sprite=(player.sprite+1)%2  -- alternate between 0 and 1
  end
 else
  player.anim.frame=player.sprite --resets to idle sprite when not moving
 end
end
-->8
--enemy--

enemies={}

function ienemies()
 for i=1,5 do
	 add(enemies,{
		 x=rnd(20+64),
		 y=rnd(20+64),
		 sprite=2,
		 hp=100,
		 damage=10,
		 flipped=false,
		 moving=false,
		 anim={
		  timer=0,
		  frame=0
		 }
	 })
 end
end
__gfx__
00000000000000000000000008080080000808800008888000000080000000800000000000000000000000000000000000000000000000000000000000000000
00000000004440000033300000008008080008880088888800808008008088880044400000444000000000000000000000000000000000000000000000000000
00000000007f700000838000008888080008038808888888000008000888888800ff700000fff000000000000000000000000000000000000000000000000000
0000000000fff00000333000003880008006633886363388063633880636338800fff00000fff000000000000000000000000000000000000000000000000000
0000500000a110000066300000863088003666308866888800668888086688880011a00000111000000000000000000000000000000000000000000000000000
00000000001110000036600000366080006036008368388803683808036838880011100000111000000000000000000000000000000000000000000000000000
00000000001010000060300000603000000030080888888800008000088880880010100000101000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000008000008088000080088000800000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000f00200d75019750157500d750167500d7500f55012750137500f7500f7500d7500f7500d5500d7500d750157501475012750165501775010550147501675012750145500d750167501675009550167501a750
001c00001a7501e75021750217502275022750227501a750127501175012750137501575016750167501b7501f7502575025750257502475024750237501c7501775017750177501775017750157501475013750
0000000004316221062010622065230543cb07240561ab2510a2412a2312a4213a5213a6113a5113a4118a5113a523fa7213a7313a522aa5224b522d0622ca7230a1324a2324a223da323da532f0733ea573a167
001000200000015150111500a15004150000000415000000051500000000000041500000000000041500000004150000000000007150041500000005150001500000006150041500000000000021500915000000
001000001b3501335000000083500735000000000000435005350000000000000000053500000000000000001c250000000000018150000000000004150000000415000000041500415004150041500000000000
__music__
00 00014344

